<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="example"></div>

<script type="text/babel">

    class Block extends React.Component{
        render () {
            const num = 20;
            return (
                <div className="test">
                    <span>Alex {num + 8} </span>
                </div>
            );
        }
    }

    class Game extends React.Component{
        render () {
            return (
                <div>
                    <span>{this.props.name}</span>
                    <strong> {this.props.age}</strong>
                </div>
            );
        }
    }

    class Task extends React.Component{
        constructor(props) {
            super(props);
            this.state = {
                edit: false
            };
            this.save = this.save.bind(this);
        }
        edit = () => {
            this.setState({edit: true});
        };
        remove = () => {
            this.props.deleteBlock (this.props.index);
        };
        save = () => {
            this.props.update (this.refs.newTxt.value, this.props.index);
            this.setState({edit: false})
        };
        renderNorm = () => {
            return (
                <div className="box">
                    <div className="text">{this.props.children}</div>
                    <button className="btn" onClick={this.edit}>Change</button>
                    <button className="btn" onClick={this.remove}>Delete</button>
                </div>
            );
        };
        renderEdit = () => {
            return (
                <div className="box">
                    <textarea ref="newTxt" defaultValue={this.props.children}></textarea>
                    <button className="btn" onClick={this.save}>Save</button>
                </div>
            )
        };
        render = () => {
            if (this.state.edit) {
                return this.renderEdit();
            } else {
                return this.renderNorm();
            }
        }
    }

    class Check extends React.Component{
        constructor() {
            super();
            this.state = {checked: true};
            this.handleCheck = this.handleCheck.bind(this);
        };
        handleCheck() {
            this.setState({
                checked: !this.state.checked
            });
        }
        render () {
            var message;
            if (this.state.checked) {
                message = 'checked'
            } else {
                message = 'not checked'
            }

            return (
                <div>
                    <input type="checkbox" onChange={this.handleCheck} defaultChecked={this.state.checked}/>
                    <p>Checkbox {message}</p>
                </div>
            )
        }
    }
    
    class Field extends React.Component {
        constructor(props) {
            super(props);
            this.state = {
                tasks: [
                    'test 1',
                    'test 2',
                    'test 3'
                ],
            };
        };
        add = (text) => {
            var arr = this.state.tasks;
            arr.push(text);
            this.setState({tasks: arr});
        }
        deleteBlock = (i) => {
            var arr = this.state.tasks;
            arr.splice (i, 1);
            this.setState({ tasks: arr });
        };
        updateText = (text, i) => {
            var arr = this.state.tasks;
            arr[i] = text;
            this.setState ({ tasks: arr });
        };
        eachTask = (item, i) => {
            return (
                <Task key={i} index={i} update={this.updateText} deleteBlock={this.deleteBlock} className="task-name">
                    {item}
                </Task>)
        };
        render () {
            return (
                <div className="field">
                    <button className="btn btn-new" onClick={this.add.bind(null, 'Default task')}>New tasks</button>
                    {this.state.tasks.map(this.eachTask)}
                </div>
            )
        }
    }
    const app = document.getElementById('example');

    ReactDOM.render(
        // <div className="wrapper">
        //     <Block/>
        //     <Game name={"Forza"} age={"18"}/>
        //     <Game name={"Mortal Combat"} age={"5+"}/>
        //     <Game name={"GTA 5"} age={"12+"}/>
        //     <Task>Hey man</Task>
        //     <Check></Check>
        //     <Task>Hey girl</Task>
        // </div>,
        <Field />,
        app
    );

</script>
<!--
  Note: this page is a great way to try React but it's not suitable for production.
  It slowly compiles JSX with Babel in the browser and uses a large development build of React.

  To set up a production-ready React build environment, follow these instructions:
  * https://reactjs.org/docs/add-react-to-a-new-app.html
  * https://reactjs.org/docs/add-react-to-an-existing-app.html

  You can also use React without JSX, in which case you can remove Babel:
  * https://reactjs.org/docs/react-without-jsx.html
  * https://reactjs.org/docs/cdn-links.html
-->
</body>
</html>